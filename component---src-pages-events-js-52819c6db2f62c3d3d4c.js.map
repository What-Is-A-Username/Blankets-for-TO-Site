{"version":3,"file":"component---src-pages-events-js-52819c6db2f62c3d3d4c.js","mappings":"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","sources":["webpack://blankets-for-to-site/./src/components/header-image.js","webpack://blankets-for-to-site/./src/components/header-image.module.css","webpack://blankets-for-to-site/./src/components/events/event-popup.module.css","webpack://blankets-for-to-site/./src/components/events/event-popup.js","webpack://blankets-for-to-site/./src/components/events/event-card.js","webpack://blankets-for-to-site/./src/components/events/event-card.module.css","webpack://blankets-for-to-site/./src/page-styles/events.module.css","webpack://blankets-for-to-site/./src/pages/events.js","webpack://blankets-for-to-site/./node_modules/lodash/_Symbol.js","webpack://blankets-for-to-site/./node_modules/lodash/_arrayMap.js","webpack://blankets-for-to-site/./node_modules/lodash/_baseGetTag.js","webpack://blankets-for-to-site/./node_modules/lodash/_baseToString.js","webpack://blankets-for-to-site/./node_modules/lodash/_freeGlobal.js","webpack://blankets-for-to-site/./node_modules/lodash/_getRawTag.js","webpack://blankets-for-to-site/./node_modules/lodash/_objectToString.js","webpack://blankets-for-to-site/./node_modules/lodash/_root.js","webpack://blankets-for-to-site/./node_modules/lodash/isArray.js","webpack://blankets-for-to-site/./node_modules/lodash/isObject.js","webpack://blankets-for-to-site/./node_modules/lodash/isObjectLike.js","webpack://blankets-for-to-site/./node_modules/lodash/isSymbol.js","webpack://blankets-for-to-site/./node_modules/lodash/toString.js"],"sourcesContent":["import React from 'react'\r\nimport { GatsbyImage } from 'gatsby-plugin-image'\r\nimport Animation from '../components/animate/animation'\r\nimport { parent, fluidImage, textBox, title, subtitle } from './header-image.module.css'\r\n\r\nconst HeaderImage = ({imgFluid, headerTitle, headerSubtitle}) => {\r\n\treturn (\r\n\t\t<div className={parent}>\r\n            <GatsbyImage image={imgFluid} className={fluidImage} alt={`Header image for ${headerTitle}`}/>\r\n            <div className={textBox}>\r\n                <Animation fade>\r\n                    <h1 className={title}>{headerTitle}</h1>\r\n                    {(headerSubtitle === undefined || headerSubtitle !== \"\") ? <p className={subtitle}>{headerSubtitle}</p> : <p/>}\r\n                </Animation>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HeaderImage","// extracted by mini-css-extract-plugin\nexport var fluidImage = \"header-image-module--fluidImage--VcxNc\";\nexport var parent = \"header-image-module--parent--+k-Gi\";\nexport var stripe = \"header-image-module--stripe--H80IG\";\nexport var subtitle = \"header-image-module--subtitle--WxSQc\";\nexport var textBox = \"header-image-module--textBox--eeKBu\";\nexport var title = \"header-image-module--title--sUs+3\";","// extracted by mini-css-extract-plugin\nexport var articleLink = \"event-popup-module--articleLink--lvRxa\";\nexport var background = \"event-popup-module--background--Yjyf3\";\nexport var blocker = \"event-popup-module--blocker--24eYO\";\nexport var closeButton = \"event-popup-module--closeButton--ESftC\";\nexport var datetime = \"event-popup-module--datetime--siFzN\";\nexport var description = \"event-popup-module--description--nBn0r\";\nexport var image = \"event-popup-module--image--Yg1Dz\";\nexport var location = \"event-popup-module--location--P5Jet\";\nexport var modal = \"event-popup-module--modal--V4K5I\";\nexport var modalContent = \"event-popup-module--modalContent--JPuWi\";\nexport var modalLayout = \"event-popup-module--modalLayout--Hdu6q\";\nexport var modalPadding = \"event-popup-module--modalPadding--04AxW\";\nexport var subtitle = \"event-popup-module--subtitle--HY688\";\nexport var textContent = \"event-popup-module--textContent--5HPki\";\nexport var title = \"event-popup-module--title--DWn+i\";","import React from \"react\";\r\nimport { GatsbyImage } from 'gatsby-plugin-image'\r\nimport { background, blocker, modalContent, modalPadding, modal, closeButton, modalLayout, image } from './event-popup.module.css'\r\nimport { articleLink, textContent, title, description, subtitle, datetime, location } from './event-popup.module.css'\r\nimport { X } from \"react-feather\";\r\n\r\nclass EventPopup extends React.Component {\r\n\r\n    render() {\r\n\r\n        const {eventData, onClose} = this.props;\r\n  \r\n        eventData.articles = eventData.articles.map(article => {\r\n            const { sys: { contentType: { sys: { id: entryType }} } } = article\r\n            if (entryType === 'blogPost') {\r\n                return {...article, type: article.articleType, fullSlug: `/blog/${article.slug}` }\r\n            } else if (entryType === 'page') {\r\n                return {...article, type: 'Page', fullSlug: `/pages/${article.slug}`}\r\n            } else {\r\n                return {...article, type: 'Link', fullSlug: `/${slug}`}\r\n            }\r\n\r\n        })\r\n\r\n        return(\r\n            <div className={background}>\r\n                <div className={blocker} onClick={onClose} ref={this.popupBlocker}/>\r\n                <div ref={this.modalRef} className={modal}>\r\n                    <div className={modalPadding}>\r\n                        <div className={modalContent}>\r\n                            <h1 className={title}>{eventData.eventName}</h1>\r\n                            <div className={modalLayout}>\r\n                                <div className={image}>\r\n                                    <GatsbyImage alt={eventData.smallPreviewImage.description} image={eventData.smallPreviewImage.gatsbyImageData}/>\r\n                                </div>\r\n                                <div className={textContent}>\r\n                                    <div className={description} dangerouslySetInnerHTML={{\r\n                                        __html: eventData.description.childMarkdownRemark.html,\r\n                                    }}/>\r\n                                    <strong className={subtitle}>When is it?</strong>\r\n                                    <p className={datetime}>\r\n                                        {\r\n                                            eventData.eventDate !== `Date and time to be announced` ? \r\n                                            `${eventData.eventDate} to ${eventData.endDate}` :\r\n                                            `Date and time to be announced.`\r\n                                        }\r\n                                    </p>\r\n                                    <strong className={subtitle}>Where is it?</strong>\r\n                                    <div className={location} dangerouslySetInnerHTML={{\r\n                                        __html: eventData.location.childMarkdownRemark.html,\r\n                                    }}/>\r\n                                    <strong className={subtitle}>Read more</strong>\r\n                                    {\r\n                                        eventData.articles.map((article) => {\r\n                                            return(\r\n                                                <div key={article.fullSlug}>\r\n                                                    <span>({article.type}) <a className={articleLink} href={article.fullSlug}>{article.title}</a></span>\r\n                                                </div>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <X className={closeButton} onClick={onClose} size={40}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default EventPopup","import { GatsbyImage } from 'gatsby-plugin-image';\r\nimport React from 'react';\r\nimport { image, textContent, card, readMoreLine, title, datetime } from './event-card.module.css'\r\n\r\nconst EventCard = ({eventData, onClickEvent}) => {\r\n    return(\r\n        <div className={card} onClick={onClickEvent}>\r\n            <div className={image}>\r\n                <GatsbyImage image={eventData.smallPreviewImage.gatsbyImageData} alt={eventData.smallPreviewImage.description}/>\r\n            </div>\r\n            <div className={textContent}>\r\n                <h3 className={title}>{eventData.eventName}</h3>\r\n                <p className={datetime}>{eventData.eventDate}</p>\r\n            </div>\r\n            <p className={readMoreLine}>Read more</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EventCard;","// extracted by mini-css-extract-plugin\nexport var card = \"event-card-module--card--QDVVO\";\nexport var datetime = \"event-card-module--datetime--uf7Fm\";\nexport var image = \"event-card-module--image--dvGC4\";\nexport var readMoreLine = \"event-card-module--readMoreLine--TW-WL\";\nexport var textContent = \"event-card-module--textContent--Uf5Gl\";\nexport var title = \"event-card-module--title--J-Sxf\";","// extracted by mini-css-extract-plugin\nexport var gridLayout = \"events-module--gridLayout--GBIBz\";","import React from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport SEO from '../components/SEO'\r\nimport Layout from '../components/layout'\r\nimport HeaderImage from '../components/header-image'\r\nimport EventPopup from '../components/events/event-popup'\r\nimport EventCard from '../components/events/event-card'\r\nimport { gridLayout } from '../page-styles/events.module.css'\r\nimport { keys } from 'lodash'\r\n\r\nclass Events extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.dateTimeFormatter = Intl.DateTimeFormat('en-US', {\r\n            weekday: 'long',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            year: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            timeZoneName: 'short'\r\n        })\r\n        this.dateFormatter = Intl.DateTimeFormat('en-US', {\r\n            weekday: 'long',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            year: 'numeric',\r\n        })\r\n        this.timeFormatter = Intl.DateTimeFormat('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            timeZoneName: 'short'\r\n        })\r\n        this.state = { popupActive: false, popupCategory: undefined, popupIndex: undefined}\r\n        this.UPCOMING = 'upcoming'\r\n        this.PAST = 'past'\r\n    }\r\n    \r\n    onClickEvent = (popupCategory, popupIndex) => {\r\n        document.getElementsByTagName('body')[0].style.overflowY = 'hidden'\r\n        this.setState({ popupActive: true, popupCategory, popupIndex })\r\n    }\r\n\r\n    onClosePopup = () => {\r\n        this.setState({ popupActive: false })\r\n        document.getElementsByTagName('body')[0].style.overflowY = 'scroll'\r\n    }\r\n\r\n    render() {\r\n        const imgFluid = this.props.data.allContentfulHeaderImage.nodes[0].image.gatsbyImageData\r\n        const headerTitle = 'Events Calendar'\r\n        // parse dates\r\n        var events = this.props.data.allContentfulEvents.nodes;\r\n        const now = Date.now()\r\n\r\n        events = events.map(eventData => {\r\n            \r\n            const eventDate = new Date(eventData.eventDate)\r\n            const endDate = new Date(eventData.endDate)\r\n\r\n            if (!eventData.eventDate || !eventData.endDate) {\r\n                return(\r\n                    {\r\n                        ...eventData,\r\n                        eventDateVal: 0,\r\n                        endDateVal: 0,\r\n                        startDate: this.dateTimeFormatter.format(new Date(eventData.startDate)),\r\n                        eventDate: 'Date and time to be announced',\r\n                        endDate: 'Date and time to be announced',\r\n                    }\r\n                )\r\n            } else if (eventDate.getMonth() != endDate.getMonth() || eventDate.getDate() != endDate.getDate()) {\r\n                return(\r\n                    {\r\n                        ...eventData,\r\n                        eventDateVal: new Date(eventData.eventDate),\r\n                        endDateVal: new Date(eventData.endDate),\r\n                        startDate: this.dateTimeFormatter.format(new Date(eventData.startDate)),\r\n                        eventDate: this.dateFormatter.format(eventDate),\r\n                        endDate: this.dateFormatter.format(endDate),\r\n                    }\r\n                )\r\n            } else {\r\n                return(\r\n                    {\r\n                        ...eventData,\r\n                        eventDateVal: new Date(eventData.eventDate),\r\n                        endDateVal: new Date(eventData.endDate),\r\n                        startDate: this.dateTimeFormatter.format(new Date(eventData.startDate)),\r\n                        eventDate: this.dateTimeFormatter.format(eventDate),\r\n                        endDate: this.timeFormatter.format(endDate),\r\n                    }\r\n                )\r\n            }\r\n        })\r\n       \r\n        // filter dates relative to today's date and sort\r\n        const upcomingEvents = events.filter(x => x.eventDateVal === 0 || x.endDateVal > now).sort((eventA, eventB) => {\r\n            const a = eventA.eventDateVal\r\n            const b = eventB.eventDateVal\r\n            if (a === b) return 0\r\n            else if (a === 0) return 1\r\n            else if (b === 0) return -1\r\n            else return a < b ? -1 : 1\r\n        }) \r\n        const pastEvents = events.filter(x => x.eventDateVal !== 0 && x.endDateVal < now).sort((a, b) => b.eventDateVal - a.eventDateVal) // most recent first\r\n\r\n        return (\r\n            <Layout location={this.props.location}>\r\n                <SEO title={headerTitle}\r\n                    description='Browse upcoming and past events from Blankets for T.O.'>\r\n                </SEO>\r\n                <HeaderImage imgFluid={imgFluid} headerTitle={headerTitle} />\r\n                {/* Show popup of additional information */}\r\n                {\r\n                    this.state.popupActive && this.state.popupCategory == this.UPCOMING &&\r\n                    <EventPopup eventData={upcomingEvents[this.state.popupIndex]} onClose={() => this.onClosePopup()}/>\r\n                }\r\n                {\r\n                    this.state.popupActive && this.state.popupCategory == this.PAST &&\r\n                    <EventPopup eventData={pastEvents[this.state.popupIndex]} onClose={() => this.onClosePopup()}/>\r\n                }\r\n                <div className='wrapper'>\r\n                    \r\n                    <h2>Upcoming</h2>\r\n                    <div className={gridLayout}>\r\n                        {\r\n                            upcomingEvents.map((eventData, index) => \r\n                                    <EventCard key={`Upcoming Event ${index}`} eventData={eventData} onClickEvent={() => this.onClickEvent(this.UPCOMING, index)}/>\r\n                            )\r\n                        }\r\n                        {\r\n                            upcomingEvents.length === 0 && \r\n                                <p>Unfortunately, there are no upcoming events scheduled soon. Check back soon, follow us or join our mailing list for event announcements.</p>\r\n                        }\r\n                    </div>\r\n                <div>\r\n\r\n                </div>\r\n                {/* Past/recent events */}\r\n                {\r\n                    pastEvents.length > 0 &&\r\n                    <div>\r\n                        <h2>Recent</h2>\r\n                        <div className={gridLayout}>\r\n                        {\r\n                            pastEvents.map((eventData, index) => \r\n                            <EventCard key={`Recent Event ${index}`} eventData={eventData} onClickEvent={() => this.onClickEvent(this.PAST, index)}/>\r\n                            )\r\n                        }\r\n                        </div>\r\n                    </div>\r\n                }\r\n                </div>\r\n            </Layout>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default Events\r\n\r\nexport const EventsQuery = graphql`\r\n    query EventsPageQuery {\r\n        allContentfulHeaderImage(filter: {pageName: {eq: \"Events\"}}, limit: 1) {\r\n            nodes {\r\n                image {\r\n                    gatsbyImageData(\r\n                        layout: FULL_WIDTH\r\n                        placeholder: BLURRED\r\n                    )\r\n                }\r\n            }\r\n        }\r\n        allContentfulEvents(filter: {siteVisible: {eq: true}}) {\r\n            nodes {\r\n                startDate(formatString: \"YYYY-MM-DDTHH:mm:ss[Z]\")\r\n                endDate(formatString: \"YYYY-MM-DDTHH:mm:ss[Z]\")\r\n                eventDate(formatString: \"YYYY-MM-DDTHH:mm:ss[Z]\")\r\n                eventName\r\n                articles {\r\n                    ... on ContentfulPage {\r\n                        slug\r\n                        title\r\n                        sys {\r\n                            type\r\n                            contentType {\r\n                                sys {\r\n                                    id\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    ... on ContentfulBlogPost {\r\n                        slug\r\n                        title\r\n                        articleType\r\n                        sys {\r\n                            contentType {\r\n                                sys {\r\n                                    id\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                description {\r\n                    childMarkdownRemark {\r\n                        html\r\n                    }\r\n                }\r\n                location {\r\n                    childMarkdownRemark {\r\n                        html\r\n                    }\r\n                }\r\n                smallPreviewImage {\r\n                    gatsbyImageData(\r\n                        width: 400\r\n                        layout: FULL_WIDTH\r\n                        placeholder: BLURRED\t\t\t\t\r\n                    )\r\n                    description\r\n                }\r\n            }\r\n        }\r\n    }\r\n`","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n"],"names":["imgFluid","headerTitle","headerSubtitle","className","G","image","alt","fade","undefined","subtitle","EventPopup","render","this","props","eventData","onClose","articles","map","article","entryType","sys","contentType","id","type","articleType","fullSlug","slug","onClick","ref","popupBlocker","modalRef","eventName","smallPreviewImage","description","gatsbyImageData","dangerouslySetInnerHTML","__html","childMarkdownRemark","html","eventDate","endDate","location","key","href","title","size","React","onClickEvent","gridLayout","Events","popupCategory","popupIndex","document","getElementsByTagName","style","overflowY","setState","popupActive","onClosePopup","dateTimeFormatter","Intl","DateTimeFormat","weekday","month","day","year","hour","minute","timeZoneName","dateFormatter","timeFormatter","state","UPCOMING","PAST","data","allContentfulHeaderImage","nodes","events","allContentfulEvents","now","Date","upcomingEvents","getMonth","getDate","eventDateVal","endDateVal","startDate","format","filter","x","sort","eventA","eventB","a","b","pastEvents","SEO","index","length","Symbol","module","exports","array","iteratee","result","Array","getRawTag","objectToString","symToStringTag","toStringTag","value","Object","arrayMap","isArray","isSymbol","symbolProto","prototype","symbolToString","toString","baseToString","call","freeGlobal","g","objectProto","hasOwnProperty","nativeObjectToString","isOwn","tag","unmasked","e","freeSelf","self","root","Function","baseGetTag","isObjectLike"],"sourceRoot":""}