(self.webpackChunkblankets_for_to_site=self.webpackChunkblankets_for_to_site||[]).push([[7],{4020:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],a(r),a(n))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var r={"%FE%FF":"��","%FF%FE":"��"},a=n.exec(e);a;){try{r[a[0]]=decodeURIComponent(a[0])}catch(t){var s=o(a[0]);s!==a[0]&&(r[a[0]]=s)}a=n.exec(e)}r["%C2"]="�";for(var i=Object.keys(r),l=0;l<i.length;l++){var c=i[l];e=e.replace(new RegExp(c,"g"),r[c])}return e}(e)}}},2806:function(e){"use strict";e.exports=function(e,t){for(var r={},n=Object.keys(e),a=Array.isArray(t),o=0;o<n.length;o++){var s=n[o],i=e[s];(a?-1!==t.indexOf(s):t(s,i,e))&&(r[s]=i)}return r}},5003:function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.r(t),r.d(t,{default:function(){return U}});var a=r(1721),o=r(2701),s=r.n(o),i=r(3754),l=r.n(i),c=r(7037),u=r.n(c),p=r(1469),f=r.n(p),m=r(8721),g=r.n(m),d=r(8342),h=r.n(d),y=r(4691),v=r.n(y),b=(r(4944),r(3792),r(2707),r(7294)),E=r(2851),k=r(7361),w=r.n(k),x=r(5739),C=r(8032),F=r(9041),N=function(e){var t,r=e.article;return b.createElement("a",{href:"/blog/"+r.slug,className:"blog-list-module--alink--77d7e",key:r.title},b.createElement("div",{className:"blog-list-module--preview--f4ee1"},b.createElement("div",{className:"blog-list-module--previewImage--29ee4"},b.createElement(C.G,{image:r.imagePreview.gatsbyImageData,alt:r.imagePreview.description})),b.createElement("div",null,b.createElement("h3",{className:"blog-list-module--previewTitle--6caa5"},r.title),b.createElement(F.Z,{tags:null!==(t=r.tags)&&void 0!==t?t:[],clickable:!1}),b.createElement("small",{className:"blog-list-module--previewPublishDate--2c49a"},r.publishDate,": ",r.articleType," by ",r.authorName),b.createElement("div",{className:"blog-list-module--previewDescription--d7a1c",dangerouslySetInnerHTML:{__html:r.description.childMarkdownRemark.html}}))))},j=r(4033),T=r(6026),S=r.n(T),O=function(e){var t=e.numPages,r=e.onPageClick,n=e.currentPage;return b.createElement("div",null,t>0?b.createElement("ul",{className:"page-controls-module--pageNumberParent--d7b2c"},b.createElement("div",{className:"page-controls-module--pageLabel--3ad52"},b.createElement("span",null,"Page")),S()(1,t+1).map((function(e){return b.createElement("div",{className:e==n?"page-controls-module--selectedPageItem--87395":"page-controls-module--pageNumberItem--ea863",onClick:function(){return r(e)},key:"Page"+e},b.createElement("span",null,e))}))):null)},P=r(7563),I="search-tools-module--filterTitle--2b6b6",R=function(e){var t=e.tagText,r=e.clickTagFunc,n=e.active,a=(0,b.useState)(!1),o=a[0],s=a[1];return b.createElement("div",{className:"search-tag-item-module--activeTag--1b1f1 "+(n?"search-tag-item-module--selectedTag--23277":"search-tag-item-module--unselectedTag--e31ae")},b.createElement("p",null,t),b.createElement("p",{className:"search-tag-item-module--selectTagButton--18a42",onClick:function(){return function(e){r(e),s(!o)}(t)}},n?"✖":"＋"))},A=function(e){var t=e.tags,r=e.clickTagFunc,n=e.activeTags,a=e.onDropdownChange,o=e.dropdownPlaceholder,s=t.filter((function(e){return!n.includes(e)}));s.sort(),n.sort(),t=n.concat(s);return b.createElement("div",{className:"search-tools-module--filterContainer--971e2"},b.createElement("div",{className:"search-tools-module--dropdown--b3799"},b.createElement("label",{className:I},"Sort by",b.createElement("br",null),b.createElement("select",{onChange:a,value:o},[{value:"recent",label:"Date (Recent First)"},{value:"oldest",label:"Date (Oldest First)"},{value:"titleaz",label:"Title (A-Z)"},{value:"titleza",label:"Title (Z-A)"}].map((function(e){return b.createElement("option",{value:e.value,key:e.label},e.label)}))))),b.createElement("p",{className:I},"Filter by"),b.createElement("div",{className:"search-tools-module--activeTagContainer--0e8fc"},t.map((function(e){var t=n.includes(e);return b.createElement(R,{active:t,tagText:e,clickTagFunc:r,key:e})}))))},D=function(e){function t(t){var r;(r=e.call(this,t)||this).onPageClick=function(e){r.setState({page:e})},r.sortSettings=["recent","oldest","titleaz","titleza"];var a=P.parse(w()(n(r),"props.location.search"));r.posts=w()(n(r),"props.data.allContentfulBlogPost.edges"),r.uniqueTags=r.posts.map((function(e){return null===e.node.tags?[]:e.node.tags})).flat().filter((function(e,t,r){return r.indexOf(e)===t})),g()(a,"tags")&&f()(a.tags)?a.tags=a.tags.filter((function(e){return r.uniqueTags.includes(e)})):a.tags=[],g()(a,"sort")&&u()(a.sort)&&a.sort in r.sortSettings||(a.sort=r.sortSettings[0]),g()(a,"page")&&l()(a.page)?a.page=s()(a.page,10):a.page=1,r.meetsFilter=r.meetsFilter.bind(n(r)),r.comparePosts=r.comparePosts.bind(n(r)),r.onClickTag=r.onClickTag.bind(n(r)),r.onSelect=r.onSelect.bind(n(r)),r.scrollRef=b.createRef(),r.state=a;var o="/blog/?"+P.stringify({tags:r.state.tags,sort:r.state.sort,page:r.state.page},{arrayFormat:"comma"});return"undefined"!=typeof window&&window.history.replaceState({},"",o),r}(0,a.Z)(t,e);var r=t.prototype;return r.componentDidUpdate=function(){var e="/blog/?"+P.stringify({tags:this.state.tags,sort:this.state.sort,page:this.state.page},{arrayFormat:"comma"});"undefined"!=typeof window&&(window.history.replaceState({},"",e),this.scrollRef.current.scrollIntoView())},r.meetsFilter=function(e){if(0===this.state.tags.length)return!0;if(null===e.tags)return!1;for(var t=0;t<this.state.tags.length;t++)if(!e.tags.includes(this.state.tags[t]))return!1;return!0},r.comparePosts=function(e,t){return e=e.node,t=t.node,"recent"===this.state.sort?t.publishDateValue.localeCompare(e.publishDateValue):"oldest"===this.state.sort?e.publishDateValue.localeCompare(t.publishDateValue):"titleaz"===this.state.sort?e.title.localeCompare(t.title):"titleza"===this.state.sort?t.title.localeCompare(e.title):0},r.onClickTag=function(e){this.state.tags.includes(e)?this.setState({tags:this.state.tags.filter((function(t){return t!==e}))}):this.setState({tags:[...this.state.tags,e]})},r.onSelect=function(e){this.setState({sort:e.target.value,page:1})},r.updateQuery=function(){var e="/blog/?"+P.stringify({tags:this.state.tags,sort:this.state.sort,page:this.current_page},{arrayFormat:"comma"});"undefined"!=typeof window&&window.history.replaceState({},"",e)},r.render=function(){var e=this,t=w()(this,"props.data.allContentfulHeaderImage.nodes[0].image.gatsbyImageData"),r=this.posts;r=(r=this.posts.filter((function(t){var r=t.node;return e.meetsFilter(r)}))).sort(this.comparePosts);var n=h()(r.length/10),a=v()(this.state.page,1,n),o=r.filter((function(e,t){return t>=10*(a-1)&&t<10*a}));return b.createElement(E.Z,{location:this.props.location},b.createElement(x.Z,{title:"Updates and Blog",description:"Browse articles published by Blankets for T.O., including summaries of past events and informational articles about homelessness.",cannonical:"/blog/"}),b.createElement("div",{className:"white-background"},b.createElement(j.Z,{imgFluid:t,headerTitle:"Blankets for T.O. Blog",headerSubtitle:""}),b.createElement("div",{className:"wrapper"},b.createElement("div",{className:"richText"},b.createElement("p",null,"Welcome to the Blankets for T.O blog, where we post updates on our recent and upcoming events as well as original articles educating the public about homelessness.")),b.createElement("div",{ref:this.scrollRef},b.createElement(A,{onDropdownChange:this.onSelect,dropdownPlaceholder:this.state.sort,tags:this.uniqueTags,clickTagFunc:this.onClickTag,activeTags:this.state.tags}),0===n&&b.createElement("div",null,"No results match your filter query."),b.createElement(O,{numPages:n,onPageClick:this.onPageClick,currentPage:a}),b.createElement("div",{className:"blog-module--blog_list--0f80f"},o.map((function(e,t){var r=e.node;return b.createElement("div",{key:r.slug},b.createElement(N,{article:r}))}))),b.createElement(O,{numPages:n,onPageClick:this.onPageClick,currentPage:a})))))},t}(b.Component),U=D},9750:function(e){e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},8565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},9454:function(e,t,r){var n=r(4239),a=r(7005);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},98:function(e){var t=Math.ceil,r=Math.max;e.exports=function(e,n,a,o){for(var s=-1,i=r(t((n-e)/(a||1)),0),l=Array(i);i--;)l[o?i:++s]=e,e+=a;return l}},7445:function(e,t,r){var n=r(98),a=r(6612),o=r(8601);e.exports=function(e){return function(t,r,s){return s&&"number"!=typeof s&&a(t,r,s)&&(r=s=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),s=void 0===s?t<r?1:-1:o(s),n(t,r,s,e)}}},222:function(e,t,r){var n=r(1811),a=r(5694),o=r(1469),s=r(5776),i=r(1780),l=r(327);e.exports=function(e,t,r){for(var c=-1,u=(t=n(t,e)).length,p=!1;++c<u;){var f=l(t[c]);if(!(p=null!=e&&r(e,f)))break;e=e[f]}return p||++c!=u?p:!!(u=null==e?0:e.length)&&i(u)&&s(f,u)&&(o(e)||a(e))}},5776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},6612:function(e,t,r){var n=r(7813),a=r(8612),o=r(5776),s=r(3218);e.exports=function(e,t,r){if(!s(r))return!1;var i=typeof t;return!!("number"==i?a(r)&&o(t,r.length):"string"==i&&t in r)&&n(r[t],e)}},8342:function(e,t,r){var n=r(9179)("ceil");e.exports=n},4691:function(e,t,r){var n=r(9750),a=r(4841);e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=a(r))==r?r:0),void 0!==t&&(t=(t=a(t))==t?t:0),n(a(e),t,r)}},8721:function(e,t,r){var n=r(8565),a=r(222);e.exports=function(e,t){return null!=e&&a(e,t,n)}},5694:function(e,t,r){var n=r(9454),a=r(7005),o=Object.prototype,s=o.hasOwnProperty,i=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&s.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},8612:function(e,t,r){var n=r(3560),a=r(1780);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},3754:function(e,t,r){var n=r(554);e.exports=function(e){return"number"==typeof e&&e==n(e)}},1780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7037:function(e,t,r){var n=r(4239),a=r(1469),o=r(7005);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==n(e)}},2701:function(e,t,r){var n=r(5639),a=r(9833),o=/^\s+/,s=n.parseInt;e.exports=function(e,t,r){return r||null==t?t=0:t&&(t=+t),s(a(e).replace(o,""),t||0)}},6026:function(e,t,r){var n=r(7445)();e.exports=n},7563:function(e,t,r){"use strict";const n=r(610),a=r(4020),o=r(500),s=r(2806);function i(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?a(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function p(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=p(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){i((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const a="string"==typeof r&&r.includes(e.arrayFormatSeparator),o="string"==typeof r&&!a&&c(r,e).includes(e.arrayFormatSeparator);r=o?c(r,e):r;const s=a||o?r.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===r?r:c(r,e);n[t]=s};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const a of e.split("&")){if(""===a)continue;let[e,s]=o(t.decode?a.replace(/\+/g," "):a,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:c(s,t),r(c(e,t),s,n)}for(const a of Object.keys(n)){const e=n[a];if("object"==typeof e&&null!==e)for(const r of Object.keys(e))e[r]=m(e[r],t);else n[a]=m(e,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=u(r):e[t]=r,e}),Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";i((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const a=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[",a,"]"].join("")]:[...r,[l(t,e),"[",l(a,e),"]=",l(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(n,e)].join("")];case"comma":case"separator":return t=>(r,n)=>null==n||0===n.length?r:0===r.length?[[l(t,e),"=",l(n,e)].join("")]:[[r,l(n,e)].join(e.arrayFormatSeparator)];default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,l(t,e)]:[...r,[l(t,e),"=",l(n,e)].join("")]}}(t),a={};for(const s of Object.keys(e))r(s)||(a[s]=e[s]);const o=Object.keys(a);return!1!==t.sort&&o.sort(t.sort),o.map((r=>{const a=e[r];return void 0===a?"":null===a?l(r,t):Array.isArray(a)?a.reduce(n(r),[]).join("&"):l(r,t)+"="+l(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=o(e,"#");return Object.assign({url:r.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const n=p(e.url).split("?")[0]||"",a=t.extract(e.url),o=t.parse(a,{sort:!1}),s=Object.assign(o,e.query);let i=t.stringify(s,r);i&&(i=`?${i}`);let c=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${l(e.fragmentIdentifier,r)}`),`${n}${i}${c}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:a,query:o,fragmentIdentifier:i}=t.parseUrl(e,n);return t.stringifyUrl({url:a,query:s(o,r),fragmentIdentifier:i},n)},t.exclude=(e,r,n)=>{const a=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,a,n)}},500:function(e){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},610:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}}]);
//# sourceMappingURL=component---src-pages-blog-js-84873a5fa316d742eb29.js.map