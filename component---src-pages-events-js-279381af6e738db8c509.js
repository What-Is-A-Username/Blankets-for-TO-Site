(self.webpackChunkblankets_for_to_site=self.webpackChunkblankets_for_to_site||[]).push([[651],{177:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(9854),r=n.n(a),o=n(3632),i=n.n(o),l=n(7294),s=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),u=new Map,m=new WeakMap,d=0,p=void 0;function v(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(m.has(n)||(d+=1,m.set(n,d.toString())),m.get(n)):"0"):e[t]}`;var n})).toString()}function f(e,t,n={},a=p){if(void 0===window.IntersectionObserver&&void 0!==a){const r=e.getBoundingClientRect();return t(a,{isIntersecting:a,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:o,elements:i}=function(e){let t=v(e),n=u.get(t);if(!n){const a=new Map;let r;const o=new IntersectionObserver((t=>{t.forEach((t=>{var n;const o=t.isIntersecting&&r.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=a.get(t.target))||n.forEach((e=>{e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:a},u.set(t,n)}return n}(n);let l=i.get(e)||[];return i.has(e)||i.set(e,l),l.push(t),o.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(i.delete(e),o.unobserve(e)),0===i.size&&(o.disconnect(),u.delete(r))}}l.Component;var g=e=>{let{children:t,fade:n=!1,bounce:a=!1,zoom:o=!1,animationDelay:s=100,animationDuration:c=500,onReveal:u,left:m=!1,right:d=!1,down:p=!1,up:v=!1,doNotJustifyContentCenter:g=!1,doNotAlignItemsCenter:h=!1,style:y={},className:b="",animIn:D=!0}=e;const{0:E,1:N}=(0,l.useState)(!1);s=i()([100,s]);const{ref:I,inView:w,entry:_}=function({threshold:e,delay:t,trackVisibility:n,rootMargin:a,root:r,triggerOnce:o,skip:i,initialInView:s,fallbackInView:c,onChange:u}={}){var m;const[d,p]=l.useState(null),v=l.useRef(),[g,h]=l.useState({inView:!!s,entry:void 0});v.current=u,l.useEffect((()=>{if(i||!d)return;let l;return l=f(d,((e,t)=>{h({inView:e,entry:t}),v.current&&v.current(e,t),t.isIntersecting&&o&&l&&(l(),l=void 0)}),{root:r,rootMargin:a,threshold:e,trackVisibility:n,delay:t},c),()=>{l&&l()}}),[Array.isArray(e)?e.toString():e,d,r,a,o,i,n,c,t]);const y=null==(m=g.entry)?void 0:m.target,b=l.useRef();d||!y||o||i||b.current===y||(b.current=y,h({inView:!!s,entry:void 0}));const D=[p,g.inView,g.entry];return D.ref=D[0],D.inView=D[1],D.entry=D[2],D}({triggerOnce:!0,rootMargin:"-15% 0px",trackVisibility:!0,threshold:0,delay:100,onChange:(e,t)=>{e&&setTimeout((()=>{void 0!==u&&u(),N(!0)}),s)}}),C=!(m||d||p||v),x=!_||w&&E;return l.createElement("div",{ref:I,className:x?["animate__animated",...""!==b?[b]:[],...n&&C&&D?["animate__fadeIn"]:[],...n&&m&&D?["animate__fadeInLeft"]:[],...n&&d&&D?["animate__fadeInRight"]:[],...n&&p&&D?["animate__fadeInDown"]:[],...n&&v&&D?["animate__fadeInUp"]:[],...a&&C&&D?["animate__bounceIn"]:[],...a&&m&&D?["animate__bounceInLeft"]:[],...a&&d&&D?["animate__bounceInRight"]:[],...a&&p&&D?["animate__bounceInDown"]:[],...a&&v&&D?["animate__bounceInUp"]:[],...o&&C&&D?["animate__zoomIn"]:[],...o&&m&&D?["animate__zoomInLeft"]:[],...o&&d&&D?["animate__zoomInRight"]:[],...o&&p&&D?["animate__zoomInDown"]:[],...o&&v&&D?["animate__zoomInUp"]:[]].join(" "):"",style:(k={display:"flex",flexDirection:"column",width:"100%",height:"100%",minHeight:"1px",minWidth:"1px",justifyContent:g?"unset":"center","--animate-duration":r()(c/1e3,3).toString().concat("s")},S=Object.assign({},k,y),x||(S=Object.assign({},S,{opacity:0})),S)},t);var k,S}},4033:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7294),r=n(8032),o=n(177);var i=e=>{let{imgFluid:t,headerTitle:n,headerSubtitle:i}=e;return a.createElement("div",{className:"header-image-module--parent--fa4fc"},a.createElement(r.G,{image:t,className:"header-image-module--fluidImage--55cc4",alt:"Header image for "+n}),a.createElement("div",{className:"header-image-module--textBox--79e28"},a.createElement(o.Z,{fade:!0},a.createElement("h1",{className:"header-image-module--title--b14b3"},n),void 0===i||""!==i?a.createElement("p",{className:"header-image-module--subtitle--5b149"},i):a.createElement("p",null))))}},1250:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7294),r=n(5739),o=n(2851),i=n(4033),l=n(8032),s="event-popup-module--subtitle--1d8eb",c=n(8268);class u extends a.Component{render(){const{eventData:e,onClose:t}=this.props,n=e.articles?e.articles.map((e=>{const{sys:{contentType:{sys:{id:t}}}}=e;return"blogPost"===t?{...e,type:e.articleType,fullSlug:"/blog/"+e.slug}:"page"===t?{...e,type:"Page",fullSlug:"/pages/"+e.slug}:{...e,type:"Link",fullSlug:"/"+slug}})):[];return a.createElement("div",{className:"event-popup-module--background--623c9"},a.createElement("div",{className:"event-popup-module--blocker--db879",onClick:t,ref:this.popupBlocker}),a.createElement("div",{ref:this.modalRef,className:"event-popup-module--modal--5782b"},a.createElement("div",{className:"event-popup-module--modalPadding--d3803"},a.createElement("div",{className:"event-popup-module--modalContent--24fb9"},a.createElement("h1",{className:"event-popup-module--title--0d69f"},e.eventName),a.createElement("div",{className:"event-popup-module--modalLayout--1ddbb"},a.createElement("div",{className:"event-popup-module--image--620d4"},a.createElement(l.G,{alt:e.smallPreviewImage.description,image:e.smallPreviewImage.gatsbyImageData})),a.createElement("div",{className:"event-popup-module--textContent--e473e"},a.createElement("div",{className:"event-popup-module--description--9c19f",dangerouslySetInnerHTML:{__html:e.description.childMarkdownRemark.html}}),a.createElement("strong",{className:s},"When is it?"),a.createElement("p",{className:"event-popup-module--datetime--b2217"},"Date and time to be announced"!==e.eventDate?e.eventDate+" to "+e.endDate:"Date and time to be announced."),a.createElement("strong",{className:s},"Where is it?"),a.createElement("div",{className:"event-popup-module--location--3f925",dangerouslySetInnerHTML:{__html:e.location.childMarkdownRemark.html}}),n.length>0&&a.createElement(a.Fragment,null,a.createElement("strong",{className:s},"Read more"),n.map((e=>a.createElement("div",{key:e.fullSlug},a.createElement("span",null,"(",e.type,") ",a.createElement("a",{className:"event-popup-module--articleLink--96f47",href:e.fullSlug},e.title)))))))),a.createElement(c.Z,{className:"event-popup-module--closeButton--1127e",onClick:t,size:40})))))}}var m=u;var d=e=>{let{eventData:t,onClickEvent:n}=e;return a.createElement("div",{className:"event-card-module--card--40355",onClick:n},a.createElement("div",{className:"event-card-module--image--76f18"},a.createElement(l.G,{image:t.smallPreviewImage.gatsbyImageData,alt:t.smallPreviewImage.description})),a.createElement("div",{className:"event-card-module--textContent--51fe4"},a.createElement("h3",{className:"event-card-module--title--27f4b"},t.eventName),a.createElement("p",{className:"event-card-module--datetime--b9fec"},t.eventDate)),a.createElement("p",{className:"event-card-module--readMoreLine--4d6fd"},"Read more"))},p="events-module--gridLayout--18120";class v extends a.Component{constructor(e){super(e),this.onClickEvent=(e,t)=>{document.getElementsByTagName("body")[0].style.overflowY="hidden",this.setState({popupActive:!0,popupCategory:e,popupIndex:t})},this.onClosePopup=()=>{this.setState({popupActive:!1}),document.getElementsByTagName("body")[0].style.overflowY="scroll"},this.dateTimeFormatter=Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}),this.dateFormatter=Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),this.timeFormatter=Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"}),this.state={popupActive:!1,popupCategory:void 0,popupIndex:void 0},this.UPCOMING="upcoming",this.PAST="past"}render(){const e=this.props.data.allContentfulHeaderImage.nodes[0].image.gatsbyImageData,t="Events Calendar";var n=this.props.data.allContentfulEvents.nodes;const l=Date.now(),s=(n=n.map((e=>{const t=new Date(e.eventDate),n=new Date(e.endDate);return e.eventDate&&e.endDate?t.getMonth()!=n.getMonth()||t.getDate()!=n.getDate()?{...e,eventDateVal:new Date(e.eventDate),endDateVal:new Date(e.endDate),startDate:this.dateTimeFormatter.format(new Date(e.startDate)),eventDate:this.dateFormatter.format(t),endDate:this.dateFormatter.format(n)}:{...e,eventDateVal:new Date(e.eventDate),endDateVal:new Date(e.endDate),startDate:this.dateTimeFormatter.format(new Date(e.startDate)),eventDate:this.dateTimeFormatter.format(t),endDate:this.timeFormatter.format(n)}:{...e,eventDateVal:0,endDateVal:0,startDate:this.dateTimeFormatter.format(new Date(e.startDate)),eventDate:"Date and time to be announced",endDate:"Date and time to be announced"}}))).filter((e=>0===e.eventDateVal||e.endDateVal>l)).sort(((e,t)=>{const n=e.eventDateVal,a=t.eventDateVal;return n===a?0:0===n?1:0===a||n<a?-1:1})),c=n.filter((e=>0!==e.eventDateVal&&e.endDateVal<l)).sort(((e,t)=>t.eventDateVal-e.eventDateVal));return a.createElement(o.Z,{location:this.props.location},a.createElement(r.Z,{title:t,description:"Browse upcoming and past events from Blankets for T.O."}),a.createElement(i.Z,{imgFluid:e,headerTitle:t}),this.state.popupActive&&this.state.popupCategory==this.UPCOMING&&a.createElement(m,{eventData:s[this.state.popupIndex],onClose:()=>this.onClosePopup()}),this.state.popupActive&&this.state.popupCategory==this.PAST&&a.createElement(m,{eventData:c[this.state.popupIndex],onClose:()=>this.onClosePopup()}),a.createElement("div",{className:"wrapper"},a.createElement("h2",null,"Upcoming"),a.createElement("div",{className:p},s.map(((e,t)=>a.createElement(d,{key:"Upcoming Event "+t,eventData:e,onClickEvent:()=>this.onClickEvent(this.UPCOMING,t)}))),0===s.length&&a.createElement("p",null,"Unfortunately, there are no upcoming events scheduled soon. Check back soon, follow us or join our mailing list for event announcements.")),a.createElement("div",null),c.length>0&&a.createElement("div",null,a.createElement("h2",null,"Recent"),a.createElement("div",{className:p},c.map(((e,t)=>a.createElement(d,{key:"Recent Event "+t,eventData:e,onClickEvent:()=>this.onClickEvent(this.PAST,t)})))))))}}var f=v},2705:function(e,t,n){var a=n(5639).Symbol;e.exports=a},9932:function(e){e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}},6029:function(e,t,n){var a=n(3448);e.exports=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],l=t(i);if(null!=l&&(void 0===s?l==l&&!a(l):n(l,s)))var s=l,c=i}return c}},4239:function(e,t,n){var a=n(2705),r=n(9607),o=n(2333),i=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?r(e):o(e)}},433:function(e){e.exports=function(e,t){return e<t}},531:function(e,t,n){var a=n(2705),r=n(9932),o=n(1469),i=n(3448),l=a?a.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return r(t,e)+"";if(i(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},7561:function(e,t,n){var a=n(7990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(r,""):e}},9179:function(e,t,n){var a=n(5639),r=n(554),o=n(4841),i=n(9833),l=a.isFinite,s=Math.min;e.exports=function(e){var t=Math[e];return function(e,n){if(e=o(e),(n=null==n?0:s(r(n),292))&&l(e)){var a=(i(e)+"e").split("e"),c=t(a[0]+"e"+(+a[1]+n));return+((a=(i(c)+"e").split("e"))[0]+"e"+(+a[1]-n))}return t(e)}}},1957:function(e,t,n){var a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=a},9607:function(e,t,n){var a=n(2705),r=Object.prototype,o=r.hasOwnProperty,i=r.toString,l=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var a=!0}catch(s){}var r=i.call(e);return a&&(t?e[l]=n:delete e[l]),r}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:function(e,t,n){var a=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},7990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},6557:function(e){e.exports=function(e){return e}},1469:function(e){var t=Array.isArray;e.exports=t},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3448:function(e,t,n){var a=n(4239),r=n(7005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==a(e)}},3632:function(e,t,n){var a=n(6029),r=n(433),o=n(6557);e.exports=function(e){return e&&e.length?a(e,o,r):void 0}},9854:function(e,t,n){var a=n(9179)("round");e.exports=a},8601:function(e,t,n){var a=n(4841),r=1/0;e.exports=function(e){return e?(e=a(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:function(e,t,n){var a=n(8601);e.exports=function(e){var t=a(e),n=t%1;return t==t?n?t-n:t:0}},4841:function(e,t,n){var a=n(7561),r=n(3218),o=n(3448),i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=l.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}},9833:function(e,t,n){var a=n(531);e.exports=function(e){return null==e?"":a(e)}}}]);
//# sourceMappingURL=component---src-pages-events-js-279381af6e738db8c509.js.map