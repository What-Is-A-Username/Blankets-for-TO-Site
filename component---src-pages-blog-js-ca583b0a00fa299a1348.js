(self.webpackChunkblankets_for_to_site=self.webpackChunkblankets_for_to_site||[]).push([[7],{4020:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),a=new RegExp("("+t+")+","gi");function n(e,t){try{return[decodeURIComponent(e.join(""))]}catch(s){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],n(r),n(a))}function s(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(r)||[],a=1;a<t.length;a++)t=(e=n(t,a).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var r={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch(t){var o=s(n[0]);o!==n[0]&&(r[n[0]]=o)}n=a.exec(e)}r["%C2"]="�";for(var l=Object.keys(r),i=0;i<l.length;i++){var c=l[i];e=e.replace(new RegExp(c,"g"),r[c])}return e}(e)}}},2806:function(e){"use strict";e.exports=function(e,t){for(var r={},a=Object.keys(e),n=Array.isArray(t),s=0;s<a.length;s++){var o=a[s],l=e[o];(n?-1!==t.indexOf(o):t(o,l,e))&&(r[o]=l)}return r}},4033:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7294),n=r(8032),s=r(177);var o=e=>{let{imgFluid:t,headerTitle:r,headerSubtitle:o}=e;return a.createElement("div",{className:"header-image-module--parent--fa4fc"},a.createElement(n.G,{image:t,className:"header-image-module--fluidImage--55cc4",alt:"Header image for "+r}),a.createElement("div",{className:"header-image-module--textBox--79e28"},a.createElement(s.Z,{fade:!0},a.createElement("h1",{className:"header-image-module--title--b14b3"},r),void 0===o||""!==o?a.createElement("p",{className:"header-image-module--subtitle--5b149"},o):a.createElement("p",null))))}},6:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var a=r(2701),n=r.n(a),s=r(3754),o=r.n(s),l=r(7037),i=r.n(l),c=r(1469),u=r.n(c),m=r(8721),p=r.n(m),g=r(8342),d=r.n(g),f=r(4691),h=r.n(f),y=(r(3383),r(7294)),b=r(2851),v=r(7361),E=r.n(v),k=r(5739),w=r(8032),x=r(9041),N=e=>{var t;let{article:r}=e;return y.createElement("a",{href:"/blog/"+r.slug,className:"blog-list-module--alink--77d7e",key:r.title},y.createElement("div",{className:"blog-list-module--preview--f4ee1"},y.createElement("div",{className:"blog-list-module--previewImage--29ee4"},y.createElement(w.G,{image:r.imagePreview.gatsbyImageData,alt:r.imagePreview.description})),y.createElement("div",null,y.createElement("h3",{className:"blog-list-module--previewTitle--6caa5"},r.title),y.createElement(x.Z,{tags:null!==(t=r.tags)&&void 0!==t?t:[],clickable:!1}),y.createElement("small",{className:"blog-list-module--previewPublishDate--2c49a"},r.publishDate,": ",r.articleType," by ",r.authorName),y.createElement("div",{className:"blog-list-module--previewDescription--d7a1c",dangerouslySetInnerHTML:{__html:r.description.childMarkdownRemark.html}}))))},C=r(4033),F=r(6026),j=r.n(F),T=e=>{let{numPages:t,onPageClick:r,currentPage:a}=e;return y.createElement("div",null,t>0?y.createElement("ul",{className:"page-controls-module--pageNumberParent--d7b2c"},y.createElement("div",{className:"page-controls-module--pageLabel--3ad52"},y.createElement("span",null,"Page")),j()(1,t+1).map((e=>y.createElement("div",{className:e==a?"page-controls-module--selectedPageItem--87395":"page-controls-module--pageNumberItem--ea863",onClick:()=>r(e),key:"Page"+e},y.createElement("span",null,e))))):null)},S=r(7563),O="search-tools-module--filterTitle--2b6b6";var P=e=>{let{tagText:t,clickTagFunc:r,active:a}=e;const{0:n,1:s}=(0,y.useState)(!1);return y.createElement("div",{className:"search-tag-item-module--activeTag--1b1f1 "+(a?"search-tag-item-module--selectedTag--23277":"search-tag-item-module--unselectedTag--e31ae")},y.createElement("p",null,t),y.createElement("p",{className:"search-tag-item-module--selectTagButton--18a42",onClick:()=>(e=>{r(e),s(!n)})(t)},a?"✖":"＋"))};var I=e=>{let{tags:t,clickTagFunc:r,activeTags:a,onDropdownChange:n,dropdownPlaceholder:s}=e;const o=t.filter((e=>!a.includes(e)));o.sort(),a.sort(),t=a.concat(o);return y.createElement("div",{className:"search-tools-module--filterContainer--971e2"},y.createElement("div",{className:"search-tools-module--dropdown--b3799"},y.createElement("label",{className:O},"Sort by",y.createElement("br",null),y.createElement("select",{onChange:n,value:s},[{value:"recent",label:"Date (Recent First)"},{value:"oldest",label:"Date (Oldest First)"},{value:"titleaz",label:"Title (A-Z)"},{value:"titleza",label:"Title (Z-A)"}].map((e=>y.createElement("option",{value:e.value,key:e.label},e.label)))))),y.createElement("p",{className:O},"Filter by"),y.createElement("div",{className:"search-tools-module--activeTagContainer--0e8fc"},t.map((e=>{var t=a.includes(e);return y.createElement(P,{active:t,tagText:e,clickTagFunc:r,key:e})}))))};class A extends y.Component{constructor(e){super(e),this.onPageClick=e=>{this.setState({page:e})},this.sortSettings=["recent","oldest","titleaz","titleza"];var t=S.parse(E()(this,"props.location.search"));this.posts=E()(this,"props.data.allContentfulBlogPost.edges"),this.uniqueTags=this.posts.map((e=>null===e.node.tags?[]:e.node.tags)).flat().filter(((e,t,r)=>r.indexOf(e)===t)),p()(t,"tags")&&u()(t.tags)?t.tags=t.tags.filter((e=>this.uniqueTags.includes(e))):t.tags=[],p()(t,"sort")&&i()(t.sort)&&t.sort in this.sortSettings||(t.sort=this.sortSettings[0]),p()(t,"page")&&o()(t.page)?t.page=n()(t.page,10):t.page=1,this.meetsFilter=this.meetsFilter.bind(this),this.comparePosts=this.comparePosts.bind(this),this.onClickTag=this.onClickTag.bind(this),this.onSelect=this.onSelect.bind(this),this.scrollRef=y.createRef(),this.state=t;let r="/blog/?"+S.stringify({tags:this.state.tags,sort:this.state.sort,page:this.state.page},{arrayFormat:"comma"});"undefined"!=typeof window&&window.history.replaceState({},"",r)}componentDidUpdate(){let e="/blog/?"+S.stringify({tags:this.state.tags,sort:this.state.sort,page:this.state.page},{arrayFormat:"comma"});"undefined"!=typeof window&&(window.history.replaceState({},"",e),this.scrollRef.current.scrollIntoView())}meetsFilter(e){if(0===this.state.tags.length)return!0;if(null===e.tags)return!1;for(var t=0;t<this.state.tags.length;t++)if(!e.tags.includes(this.state.tags[t]))return!1;return!0}comparePosts(e,t){return e=e.node,t=t.node,"recent"===this.state.sort?t.publishDateValue.localeCompare(e.publishDateValue):"oldest"===this.state.sort?e.publishDateValue.localeCompare(t.publishDateValue):"titleaz"===this.state.sort?e.title.localeCompare(t.title):"titleza"===this.state.sort?t.title.localeCompare(e.title):0}onClickTag(e){this.state.tags.includes(e)?this.setState({tags:this.state.tags.filter((t=>t!==e))}):this.setState({tags:[...this.state.tags,e]})}onSelect(e){this.setState({sort:e.target.value,page:1})}updateQuery(){let e="/blog/?"+S.stringify({tags:this.state.tags,sort:this.state.sort,page:this.current_page},{arrayFormat:"comma"});"undefined"!=typeof window&&window.history.replaceState({},"",e)}render(){const e=E()(this,"props.data.allContentfulHeaderImage.nodes[0].image.gatsbyImageData");var t=this.posts;t=(t=this.posts.filter((e=>{let{node:t}=e;return this.meetsFilter(t)}))).sort(this.comparePosts);const r=d()(t.length/10);var a=h()(this.state.page,1,r),n=t.filter(((e,t)=>t>=10*(a-1)&&t<10*a));return y.createElement(b.Z,{location:this.props.location},y.createElement(k.Z,{title:"Updates and Blog",description:"Browse articles published by Blankets for T.O., including summaries of past events and informational articles about homelessness.",cannonical:"/blog/"}),y.createElement("div",{className:"white-background"},y.createElement(C.Z,{imgFluid:e,headerTitle:"Blankets for T.O. Blog",headerSubtitle:""}),y.createElement("div",{className:"wrapper"},y.createElement("div",{className:"richText"},y.createElement("p",null,"Welcome to the Blankets for T.O blog, where we post updates on our recent and upcoming events as well as original articles educating the public about homelessness.")),y.createElement("div",{ref:this.scrollRef},y.createElement(I,{onDropdownChange:this.onSelect,dropdownPlaceholder:this.state.sort,tags:this.uniqueTags,clickTagFunc:this.onClickTag,activeTags:this.state.tags}),0===r&&y.createElement("div",null,"No results match your filter query."),y.createElement(T,{numPages:r,onPageClick:this.onPageClick,currentPage:a}),y.createElement("div",{className:"blog-module--blog_list--0f80f"},n.map(((e,t)=>{let{node:r}=e;return y.createElement("div",{key:r.slug},y.createElement(N,{article:r}))}))),y.createElement(T,{numPages:r,onPageClick:this.onPageClick,currentPage:a})))))}}var R=A},9750:function(e){e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},8565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},9454:function(e,t,r){var a=r(4239),n=r(7005);e.exports=function(e){return n(e)&&"[object Arguments]"==a(e)}},98:function(e){var t=Math.ceil,r=Math.max;e.exports=function(e,a,n,s){for(var o=-1,l=r(t((a-e)/(n||1)),0),i=Array(l);l--;)i[s?l:++o]=e,e+=n;return i}},7445:function(e,t,r){var a=r(98),n=r(6612),s=r(8601);e.exports=function(e){return function(t,r,o){return o&&"number"!=typeof o&&n(t,r,o)&&(r=o=void 0),t=s(t),void 0===r?(r=t,t=0):r=s(r),o=void 0===o?t<r?1:-1:s(o),a(t,r,o,e)}}},222:function(e,t,r){var a=r(1811),n=r(5694),s=r(1469),o=r(5776),l=r(1780),i=r(327);e.exports=function(e,t,r){for(var c=-1,u=(t=a(t,e)).length,m=!1;++c<u;){var p=i(t[c]);if(!(m=null!=e&&r(e,p)))break;e=e[p]}return m||++c!=u?m:!!(u=null==e?0:e.length)&&l(u)&&o(p,u)&&(s(e)||n(e))}},5776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var a=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==a||"symbol"!=a&&t.test(e))&&e>-1&&e%1==0&&e<r}},6612:function(e,t,r){var a=r(7813),n=r(8612),s=r(5776),o=r(3218);e.exports=function(e,t,r){if(!o(r))return!1;var l=typeof t;return!!("number"==l?n(r)&&s(t,r.length):"string"==l&&t in r)&&a(r[t],e)}},8342:function(e,t,r){var a=r(9179)("ceil");e.exports=a},4691:function(e,t,r){var a=r(9750),n=r(4841);e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=n(r))==r?r:0),void 0!==t&&(t=(t=n(t))==t?t:0),a(n(e),t,r)}},8721:function(e,t,r){var a=r(8565),n=r(222);e.exports=function(e,t){return null!=e&&n(e,t,a)}},5694:function(e,t,r){var a=r(9454),n=r(7005),s=Object.prototype,o=s.hasOwnProperty,l=s.propertyIsEnumerable,i=a(function(){return arguments}())?a:function(e){return n(e)&&o.call(e,"callee")&&!l.call(e,"callee")};e.exports=i},8612:function(e,t,r){var a=r(3560),n=r(1780);e.exports=function(e){return null!=e&&n(e.length)&&!a(e)}},3754:function(e,t,r){var a=r(554);e.exports=function(e){return"number"==typeof e&&e==a(e)}},1780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7037:function(e,t,r){var a=r(4239),n=r(1469),s=r(7005);e.exports=function(e){return"string"==typeof e||!n(e)&&s(e)&&"[object String]"==a(e)}},2701:function(e,t,r){var a=r(5639),n=r(9833),s=/^\s+/,o=a.parseInt;e.exports=function(e,t,r){return r||null==t?t=0:t&&(t=+t),o(n(e).replace(s,""),t||0)}},6026:function(e,t,r){var a=r(7445)();e.exports=a},7563:function(e,t,r){"use strict";const a=r(610),n=r(4020),s=r(500),o=r(2806);function l(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}function c(e,t){return t.decode?n(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function m(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=m(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,a)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===a[e]&&(a[e]={}),a[e][t[1]]=r):a[e]=r};case"bracket":return(e,r,a)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==a[e]?a[e]=[].concat(a[e],r):a[e]=[r]:a[e]=r};case"comma":case"separator":return(t,r,a)=>{const n="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!n&&c(r,e).includes(e.arrayFormatSeparator);r=s?c(r,e):r;const o=n||s?r.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===r?r:c(r,e);a[t]=o};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const n of e.split("&")){if(""===n)continue;let[e,o]=s(t.decode?n.replace(/\+/g," "):n,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:c(o,t),r(c(e,t),o,a)}for(const n of Object.keys(a)){const e=a[n];if("object"==typeof e&&null!==e)for(const r of Object.keys(e))e[r]=g(e[r],t);else a[n]=g(e,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce(((e,t)=>{const r=a[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=u(r):e[t]=r,e}),Object.create(null))}t.extract=p,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],a=function(e){switch(e.arrayFormat){case"index":return t=>(r,a)=>{const n=r.length;return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:null===a?[...r,[i(t,e),"[",n,"]"].join("")]:[...r,[i(t,e),"[",i(n,e),"]=",i(a,e)].join("")]};case"bracket":return t=>(r,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:null===a?[...r,[i(t,e),"[]"].join("")]:[...r,[i(t,e),"[]=",i(a,e)].join("")];case"comma":case"separator":return t=>(r,a)=>null==a||0===a.length?r:0===r.length?[[i(t,e),"=",i(a,e)].join("")]:[[r,i(a,e)].join(e.arrayFormatSeparator)];default:return t=>(r,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:null===a?[...r,i(t,e)]:[...r,[i(t,e),"=",i(a,e)].join("")]}}(t),n={};for(const o of Object.keys(e))r(o)||(n[o]=e[o]);const s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map((r=>{const n=e[r];return void 0===n?"":null===n?i(r,t):Array.isArray(n)?n.reduce(a(r),[]).join("&"):i(r,t)+"="+i(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,a]=s(e,"#");return Object.assign({url:r.split("?")[0]||"",query:d(p(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:c(a,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const a=m(e.url).split("?")[0]||"",n=t.extract(e.url),s=t.parse(n,{sort:!1}),o=Object.assign(s,e.query);let l=t.stringify(o,r);l&&(l=`?${l}`);let c=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${i(e.fragmentIdentifier,r)}`),`${a}${l}${c}`},t.pick=(e,r,a)=>{a=Object.assign({parseFragmentIdentifier:!0},a);const{url:n,query:s,fragmentIdentifier:l}=t.parseUrl(e,a);return t.stringifyUrl({url:n,query:o(s,r),fragmentIdentifier:l},a)},t.exclude=(e,r,a)=>{const n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,n,a)}},500:function(e){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},610:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}}]);
//# sourceMappingURL=component---src-pages-blog-js-ca583b0a00fa299a1348.js.map